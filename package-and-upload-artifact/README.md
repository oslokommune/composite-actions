<!-- BOILERPLATE BEGIN -->
<!-- Generated by running `make docs` from the project root -->

# Package and upload artifact

Packages Docker images or files for every environment listed in the JSON config, using the AWS account, bucket, role, and repository data defined there. Docker sources are retagged and pushed to ECR so Terraform can deploy them to ECS. Files or folders are zipped if needed, copied to S3, and later published through the Terraform → Lambda → CloudFront flow.


## Usage

### Inputs

|      Input      |             Description             |Required|Default|
|-----------------|-------------------------------------|--------|-------|
|`config`         |JSON-encoded config (.gp.cicd.json)  |yes     |``n/a``|
|`tag`            |The main tag to apply to the artifact|yes     |``n/a``|
|`source-location`|A Docker image ID, file or folder    |yes     |``n/a``|
|`source-type`    |docker-image \| file \| folder         |yes     |``n/a``|

### Example

```yaml
- name: Package and upload artifact
  uses: oslokommune/composite-actions/package-and-upload-artifact@main
  with:
    config: # Required
    tag: # Required
    source-location: # Required
    source-type: # Required
```

## Outputs

|  Name  |    Description    |               Value               |
|--------|-------------------|-----------------------------------|
|`result`|The final tag value|``${{ steps.upload.outputs.tag }}``|



<!-- BOILERPLATE END -->

<!-- BOILERPLATE BEGIN -->
<!-- Generated by running `make docs` from the project root -->

# Package and upload artifact

Packages Docker images or files/folders per environment using data from a JSON config: docker sources are pushed to ECR for later Terraform-driven ECS deploys, while file/folder sources are zipped if needed and uploaded to S3 for a Lambda + CloudFront deployment flow. Each environment entry (e.g. dev/prod) in the config carries its AWS account, bucket, role, and repository metadata so the action can iterate over every defined target.


## Usage

### Inputs

|      Input      |             Description             |Required|Default|
|-----------------|-------------------------------------|--------|-------|
|`config`         |JSON-encoded config (.gp.cicd.json)  |yes     |``n/a``|
|`tag`            |The main tag to apply to the artifact|yes     |``n/a``|
|`source-location`|A Docker image ID, file or folder    |yes     |``n/a``|
|`source-type`    |docker-image \| file \| folder         |yes     |``n/a``|

### Example

```yaml
- name: Package and upload artifact
  uses: oslokommune/composite-actions/package-and-upload-artifact@main
  with:
    config: # Required
    tag: # Required
    source-location: # Required
    source-type: # Required
```

## Outputs

|  Name  |    Description    |               Value               |
|--------|-------------------|-----------------------------------|
|`result`|The final tag value|``${{ steps.upload.outputs.tag }}``|



<!-- BOILERPLATE END -->
